#include "Flag.h"

Flag::Flag(sf::Texture& texture, float tileX, float tileY, int height)
{
	sf::Sprite sprite;
	sprite.setTexture(texture);

	// base :
	sprite.setTextureRect(sf::IntRect(13*32, 16*32, 32, 32));
	sprite.setPosition(tileX * 32, tileY * 32);
	tiles.push_back(sprite);

	// pole :
	for (int i = 1; i < height; i++)
	{
		sprite.setTextureRect(sf::IntRect(13*32, 15*32, 32, 32));
		sprite.setPosition(tileX * 32, (tileY - i) * 32);
		tiles.push_back(sprite);
	}

	// ball : 
	sprite.setTextureRect(sf::IntRect(13*32, 13*32, 32, 32));
	sprite.setPosition(tileX * 32, (tileY - height) * 32);
	tiles.push_back(sprite);

	// flag :
	flag.setTexture(texture);
	flag.setTextureRect(sf::IntRect(14*32, 14*32, 32, 32));
	flag.setPosition((tileX * 32 ) + 20, (tileY - height + 1) * 32);
}

void Flag::draw(sf::RenderWindow* window)
{
	for(sf::Sprite tile : tiles) window->draw(tile);
	window->draw(flag);
}
